name: Release Workflow

on:
  push:
    branches:
      - main

permissions:
  contents: write
  id-token: write

jobs:
  cd:
    uses: amerani/cicd/.github/workflows/cd-npm.yml@main   
    secrets: inherit
    with:
      test: npm run test:ci
      publish: npm run release